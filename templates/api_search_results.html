{% extends 'base.html' %}

{% block title %}Search Results üîç{% endblock %}

{% block body %}
  <h1>Searching for... {{ session['search_query'].get('title') }}!</h1>

  <form action="/review_new_media">
    <p><input type="submit"></p>
    Please select an item:  
    {% for volume in data['items'] %} 
    <div>
      <input type="radio" name="list_num" value="{{ loop.index }}" id="{{ loop.index }}" required>
      <label for="{{ loop.index }}">
        <a href="{{ volume['volumeInfo'].get('canonicalVolumeLink') }}">
              {{ volume['volumeInfo']['title'] }} 
              AUTHORED BY: {{ volume['volumeInfo'].get('authors') }}
              MY ID IS: {{ volume['id'] }}
              <img src="{{ volume['volumeInfo'].get('imageLinks')['smallThumbnail'] }}">
        </a>
      </label>
      <input type="hidden" name="{{ loop.index }}-title" 
        value="{{ volume['volumeInfo']['title'] }}">
      <input type="hidden" name="{{ loop.index }}-authors" 
        value="{{ volume['volumeInfo'].get('authors') }}">
      <input type="hidden" name="{{ loop.index }}-id" 
        value="{{ volume['id'] }}">
      <input type="hidden" name="{{ loop.index }}-cover" 
        value="{{ volume['volumeInfo'].get('imageLinks')['smallThumbnail'] }}">
      <input type="hidden" name="{{ loop.index }}-pageCount" 
        value="{{ volume['volumeInfo'].get('pageCount') }}">
      <input type="hidden" name="{{ loop.index }}-description" 
        value="{{ volume['volumeInfo'].get('description') }}">
      <input type="hidden" name="{{ loop.index }}-publishedDate" 
        value="{{ volume['volumeInfo'].get('publishedDate') }}">
      <input type="hidden" name="{{ loop.index }}-genres" 
        value="{{ volume['volumeInfo'].get('categories') }}">
    </div>
    {% endfor %}
  </form>

  <p><pre>{{ pformat(data) }}</pre></p>
  <p><a href="/search">Return to searchpage.</a></p>
{% endblock %}